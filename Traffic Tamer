#pragma config(Sensor, dgtl1,  EmergButStart,       sensorTouch)
#pragma config(Sensor, dgtl10, Yellow,              sensorDigitalOut)
#pragma config(Sensor, dgtl11, Red,                 sensorDigitalOut)
#pragma config(Sensor, dgtl12, Green,               sensorDigitalOut)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

/*----------------------------------------------------------------------------------------------------
Project Title: Terry Traffic Tamer
Team Members: PLTW
Date: 1/25/11
Section: Period 4A

Task Description: Install a traffic light that turns a green light on for 5 seconds, then yellow
light for 1 second and red light for 5 seconds. When a pushbutton switch is pressed and held the light timing
changes so that the red light stays on until emergency vehicle(s) passes through the intersection.
When the pushbutton is released the normal light sequence starts over again.


Pseudocode:
{
run continuously
{
while traffic is running normally
{
green light on 5 seconds
yellow light on 1 second
red light on 5 seconds
}

when emergency vehicle needs to go through intersection
button pressed and held
{
red light on until emergency vehicle(s) have gone through
}
original light sequence repeated
}
}


----------------------------------------------------------------------------------------------------*/


task main()               //Insert programming code between curly braces below.
{
  while (1 == 1)                          //run continuously
  {
    if (SensorValue[EmergButStart] == 1)  //if pushbutton switch is pressed
    {
      turnLEDOff(Green);                  //green light off
      turnLEDOff(Yellow);                 //yellow light off
      turnLEDOn(Red);                     //red light on
    }

    if (SensorValue[EmergButStart] == 0)  //if pushbutton not pressed
    {
      turnLEDOff(Red);                    //red light off
      turnLEDOn(Green);                   //green light on
      wait(5);                            //5 seconds
      turnLEDOff(Green);                  //green light off
      turnLEDOn(Yellow);                  //yellow light on
      wait(1);                            //1 second
      turnLEDOff(Yellow);                 //yellow light off
      turnLEDOn(Red);                     //red light on
      wait(5);                            //wait 5 seconds
    }
  }
}
